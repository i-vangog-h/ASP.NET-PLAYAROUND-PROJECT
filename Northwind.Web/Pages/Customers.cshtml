@page
@model Northwind.Web.Pages.CustomersModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
<div class="row">
    <h1 class="display-2">Customers</h1>

    <div class="accordion" id="accordionExample">
        @foreach (var group in Model.CustomersByCountry)
        {
            string country = group.Key ?? "Unknown";

            <div class="accordion-item">
                <h2 class="accordion-header" id="heading-@country">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-@country" aria-expanded="false" aria-controls="collapse-@country">
                        @country
                    </button>
                </h2>
                <div id="collapse-@country" class="accordion-collapse collapse" aria-labelledby="heading-@country" data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                        @foreach (var customer in group)
                        {
                            <p>
                                <a asp-page="./CustomerOrders" asp-route-customerId="@customer.CustomerId">
                                    @customer.CompanyName
                                </a>
                            </p>
                        }
                    </div>
                </div>
            </div>
        }
    </div>
</div>